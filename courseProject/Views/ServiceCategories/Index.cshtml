@using System.Security.Claims
@model IEnumerable<courseProject.Models.ServiceCategory>
@{
    ViewData["Title"] = "Категории услуг";
    bool isAdmin = User?.IsInRole("admin") ?? false;
}

<div class="page-header d-flex justify-content-between align-items-center">
    <h1 class="page-title"><i class="fas fa-tags me-2"></i> Категории услуг</h1>
    @if (isAdmin)
    {
        <a asp-action="Create" class="btn btn-dark">
            <i class="fas fa-plus me-2"></i> Добавить категорию
        </a>
    }
</div>

@* Показываем ошибку подключения к БД *@
@if (ViewData["DbError"] != null)
{
    <div class="alert alert-warning">
        <strong>Внимание:</strong> @ViewData["DbError"]
    </div>
}

<div class="card">
    <div class="card-body">
        <ul class="list-unstyled mb-0 category-list">
            @foreach (var item in Model)
            {
                <li class="mb-3 d-flex justify-content-between align-items-center">
                    <div>
                        <strong>@item.CategoryTitle</strong>
                    </div>
                    <div>
                        <a asp-action="Details" asp-route-id="@item.CategoryId" class="btn btn-outline-dark btn-sm">Подробнее</a>
                        @if (isAdmin)
                        {
                            <a asp-action="Edit" asp-route-id="@item.CategoryId" class="btn btn-outline-dark btn-sm ms-2">Изменить</a>
                        }
                    </div>
                </li>
            }
        </ul>
    </div>
</div>

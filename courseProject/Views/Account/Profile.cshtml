@model courseProject.Models.ProfileViewModel
@{
    ViewData["Title"] = "–ü—Ä–æ—Ñ–∏–ª—å";
}

<div class="page-header d-flex justify-content-between align-items-center">
    <h1 class="page-title">–ü—Ä–æ—Ñ–∏–ª—å</h1>
    <a asp-action="Edit" class="btn btn-dark">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
</div>

<div class="card mb-4">
    <div class="card-body d-flex gap-4 align-items-center">
        <div id="avatarPreview" style="width:96px;height:96px;border-radius:12px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:36px;">
        </div>
        <div>
            <div><strong>Email:</strong> @Model.User.Email</div>
            <div><strong>–ò–º—è:</strong> @Model.User.FullName</div>
            <div class="text-muted">–†–æ–ª—å: @Model.User.Role</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <h5>–ú–æ–∏ –∑–∞—è–≤–∫–∏</h5>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–£—Å–ª—É–≥–∏</th>
                        <th>–°—É–º–º–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var r in Model.Requests)
                    {
                        <tr>
                            <td>@r.Id</td>
                            <td>@r.CreatedAt.ToString("g")</td>
                            <td>
                                @foreach (var it in r.Items)
                                {
                                    <div>@it.Title ‚Äî @it.Price ‚ÇΩ</div>
                                }
                            </td>
                            <td>@r.Total ‚ÇΩ</td>
                            <td>
                                <span class="status-badge @(r.Status.ToLower().Replace(" ", "-"))">@r.Status</span>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // avatar preview from localStorage
        document.getElementById('avatarPreview').innerText = localStorage.getItem('userAvatar') || 'üë§';
    </script>
}
